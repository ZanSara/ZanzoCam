)0[?1049h[1;49r[0m[4l[39;49m[?1h=[?1h=[?1h=[?25l[39;49m[0m[H[2J[47;40H(B[0;7m[ Reading File ][0m[47;39H(B[0;7m[ Read 248 lines ][0m[H(B[0;7m  GNU nano 3.2                              camera.py                                         [1;93H[0m[48d(B[0;7m^G[0m Get Help    (B[0;7m^O[0m Write Out   (B[0;7m^W[0m Where Is    (B[0;7m^K[0m Cut Text    (B[0;7m^J[0m Justify     (B[0;7m^C[0m Cur Pos[49d(B[0;7m^X[0m Exit[49;16H(B[0;7m^R[0m Read File   (B[0;7m^\[0m Replace     (B[0;7m^U[0m Uncut Text  (B[0;7m^T[0m To Spell    (B[0;7m^_[0m Go To Line[47d[3d(B[0;1m[31m#!/usr/bin/python3[5d[36mimport[39;49m[0m os[6d(B[0;1m[36mimport[39;49m[0m math[7d(B[0;1m[36mimport[39;49m[0m json[8d(B[0;1m[36mimport[39;49m[0m shutil[9d(B[0;1m[36mimport[39;49m[0m requests[10d(B[0;1m[36mimport[39;49m[0m datetime[11d(B[0;1m[36mimport[39;49m[0m textwrap[12d(B[0;1m[36mfrom[39;49m[0m pathlib (B[0;1m[36mimport[39;49m[0m Path[13d(B[0;1m[36mfrom[39;49m[0m picamera (B[0;1m[36mimport[39;49m[0m PiCamera[14d(B[0;1m[36mfrom[39;49m[0m PIL (B[0;1m[36mimport[39;49m[0m Image, ImageFont, ImageDraw[17dpath = Path(__file__).parent[19d[42m    [20d(B[0;1m[36mdef[34m shoot_picture[39;49m[0m():[21;5H(B[0;1m[32m""" Scatta la foto """[22;5H[39;49m[0mcamera = PiCamera()[23;5Hcamera.resolution = (2592, 1944)[24;5Hcamera.vflip = (B[0;1m[35mFalse[25;5H[39;49m[0mcamera.hflip = (B[0;1m[35mTrue[26;5H[39;49m[0mimage_name = (B[0;1m[32m'.temp_image.jpg'[27;5H[39;49m[0mcamera.capture(image_name)[28;5H(B[0;1m[36mreturn[39;49m[0m image_name[29d[42m    [30d    [32d(B[0;1m[36mdef[34m _process_text[39;49m[0m(font, user_text, max_line_length):[33;5H(B[0;1m[32m""" Misura e manda a capo il testo per farlo stare nell'immagine """[34;4H[31m # Manda a capo il testo usando come riferimento la larghezza massima specificata[35;5H[39;49m[0mlines = [][36;5H(B[0;1m[36mfor[39;49m[0m line (B[0;1m[36min[39;49m[0m user_text.split((B[0;1m[32m"\n"[39;49m[0m):[37;9H(B[0;1m[36mif[39;49m[0m font.getsize(line)[0] <= max_line_length:[38;13Hlines.append(line)[39;9H(B[0;1m[36melse[39;49m[0m:[40dnew_line = ""[41;13H(B[0;1m[36mfor[39;49m[0m word (B[0;1m[36min[39;49m[0m line.split((B[0;1m[32m" "[39;49m[0m):[42;17H(B[0;1m[36mif[39;49m[0m font.getsize(new_line + word)[0] <= max_line_length:[43;21Hnew_line = new_line + word + (B[0;1m[32m" "[44;17H[36melse[39;49m[0m:[45dlines.append(new_line)[46;21Hnew_line = word + (B[0;1m[32m" "[3d[39;49m[0m[?12l[?25h[?25l[1;85H(B[0;7mModified[0m7[2;46r8[2dM[1;49r[4;1H[?12l[?25h[?25l[2;46r[2;1HM[1;49r[5;1H[?12l[?25h[?25l[2;46r[2;1HM[1;49r[6;1H[?12l[?25h[?25l[2;46r[2;1HM[1;49r[7;1H[?12l[?25h[?25l[2;46r[2;1H[2L[1;49r[9;1H[?12l[?25h[?25l[2;46r[2;1HM[1;49r[10;1H[?12l[?25h[49;1H[?1049l[?1l>